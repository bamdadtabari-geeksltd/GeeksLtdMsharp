@model ViewModel.ProductsList

<!-- Modules\Product\ProductsList.cs:7 -->
<form data-module="ProductsList" method="get" action="@Url.Current()" data-redirect="ajax">
   @Html.AntiForgeryToken()
   @Html.StartupActionsJson()
   <input type="hidden" name="Current-Sort" id="Current-Sort" value="@Model.Sort" />
   <div class="buttons-row top-buttons-row">
      <div class="buttons">
         <a name="NewProduct" class="btn btn-secondary" href='@Url.Index("ProductEnter")' target="$modal"><i class="fas fa-plus"></i>
            New Product</a>
         <button type="submit" name="ThisButtonExportsToCSV" class="btn btn-secondary" formaction='@Url.ActionWithQuery("ProductsList/ThisButtonExportsToCSV")' formmethod="post">This button exports to CSV</button>
         <button type="submit" name="ThisButtonExportsToExcel" class="btn btn-secondary" formaction='@Url.ActionWithQuery("ProductsList/ThisButtonExportsToExcel")' formmethod="post">This button exports to Excel</button>
      </div>
   </div>
   <h2>Products</h2>
   <div class="search">
      <fieldset>
         <div class="form-group row">
            <legend for="pl.ProductCategory" class="control-label">
               Classification
            </legend>
            <div class="group-control">
               @Html.RadioButtonsFor(x => x.ProductCategory, Model.ProductCategory_Options, new { @class = "form-check-inline", data_change_action = Url.ActionWithQuery("ProductsList/ProductCategoryChanged"), formnovalidate = "formnovalidate" }).PrefixName("pl")
            </div>
         </div>
      </fieldset>
      <div class="form-group row">
         <div class="group-control">
            <input type="text" asp-for="Name" asp-prefix="pl" class="form-control" placeholder="Enter Name" />
         </div>
      </div>
      <div class="form-group row select-grid-cols">
         <div class="group-control">
            <a class="select-cols" href="#">Select columns</a>
            <div class="select-cols">
               @Html.CheckBoxes("pl.c", Model.SelectedColumns.Current, Model.SelectedColumns.GetListOptions(), new { data_checkboxes_control="collapsible-checkboxes" })
               <input class="cancel" type="button" value="Cancel"/>
               <button type="submit" class="apply">Apply</button>
            </div>
         </div>
      </div>
      <div class="buttons-row">
         <div class="buttons">
            <button type="submit" name="Search" class="btn btn-primary" default-button="true">Search</button>
         </div>
      </div>
   </div>
   @if (Model.Items.Any())
   {
   <text>
      <div class="pagination-size paging-size">
         @Html.LabelForModel("Results per page:", new { @for="p" }).PrefixName("pl")
         @Html.DropDownList("p", Model.Paging.SizeOptions).PrefixName("pl")
      </div>
      @Html.Pagination(Model.Paging, new { @class="pagination" })
      <div class="grid-wrapper">
         <table class="grid">
            <thead>
               <tr>
                  <th>Name</th>
                  @if (Model.SelectedColumns.Contains("Image"))
                  {
                  <th>Image</th>
                  }
                  @if (Model.SelectedColumns.Contains("Actions"))
                  {
                  <th class="actions">Actions</th>
                  }
               </tr>
            </thead>
            <tbody>
               @foreach (var listItem in Model.Items)
               {
               var item = listItem.Item;
               <tr>
                  <td><a name="C_item_Name" href='@Url.Index("ProductView", new { item = item.ID })' data-redirect="ajax">@item.Name</a></td>
                  @if (Model.SelectedColumns.Contains("Image"))
                  {
                  <td><a name="Photo" title="Download" aria-label="Download" href="@item.Photo.Url()"><img src="@item.Photo.Url()" alt="Download" /></a></td>
                  }
                  @if (Model.SelectedColumns.Contains("Actions"))
                  {
                  <td class="actions"><a name="Edit" class="btn btn-secondary" href='@Url.Index("ProductEnter", new { item = item.ID })' target="$modal"><i class="fas fa-edit"></i>
                        Edit</a>
                     <button type="submit" name="Delete" class="btn-danger btn" formaction='@Url.ActionWithQuery("ProductsList/Delete", item)' data-confirm-question="Are you sure you want to delete this Product?"><i class="fas fa-times"></i>
                        Delete</button></td>
                  }
               </tr>
               }
            </tbody>
            <tfoot>
               <tr>
                  <td></td>
                  @if (Model.SelectedColumns.Contains("Image"))
                  {
                  <td></td>
                  }
                  @if (Model.SelectedColumns.Contains("Actions"))
                  {
                  <td class="actions"></td>
                  }
               </tr>
            </tfoot>
         </table>
      </div>
      @Html.Pagination(Model.Paging, new { @class="pagination" })
   </text>
   }
   @if (Model.Items.None())
   {
   <div class="empty-list">
      There are no products to display.
   </div>
   }
</form>
